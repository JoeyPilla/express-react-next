{"version":3,"file":"static/webpack/static/development/pages/editDevice.js.41bcbed4da5182518b87.hot-update.js","sources":["webpack:///./components/dropZone.js","webpack:///./pages/editDevice.js"],"sourcesContent":["class DropZone extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      className: 'drop-zone-hide'\n    }\n    this._onDragEnter = this._onDragEnter.bind(this);\n    this._onDragLeave = this._onDragLeave.bind(this);\n    this._onDragOver = this._onDragOver.bind(this);\n    this._onDrop = this._onDrop.bind(this);\n  }\n  \n  componentDidMount() {\n    window.addEventListener('mouseup', this._onDragLeave);\n    window.addEventListener('dragenter', this._onDragEnter);\n    window.addEventListener('dragover', this._onDragOver);\n    document.getElementById('dragbox').addEventListener('dragleave', this._onDragLeave);\n    window.addEventListener('drop', this._onDrop);\n  }\n  \n  componentWillUnmount() {\n    window.removeEventListener('mouseup', this._onDragLeave);\n    window.removeEventListener('dragenter', this._onDragEnter);\n    window.addEventListener('dragover', this._onDragOver);\n    document.getElementById('dragbox').removeEventListener('dragleave', this._onDragLeave);\n    window.removeEventListener('drop', this._onDrop);\n  }\n  \n  _onDragEnter(e) {\n    this.setState({ className: 'drop-zone-show' });\n    e.stopPropagation();\n    e.preventDefault();\n    return false;\n  }\n  \n  _onDragOver(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    return false;\n  }\n  \n  _onDragLeave(e) {\n    this.setState({className: 'drop-zone-hide'});\n    e.stopPropagation();\n    e.preventDefault();\n    return false;\n  }\n  \n  _onDrop(e) {\n    e.preventDefault();\n    let files = e.dataTransfer.files;\n    console.log('Files dropped: ', files);\n    // Upload files\n    this.setState({className: 'drop-zone-hide'});\n    return false;\n  }\n  \n  render() {\n    return (\n      <div>\n        {this.props.children}\n        <div id=\"dragbox\" className={this.state.className}>\n          Drop a file to Upload\n        </div>\n      </div>\n    );\n  }\n}","import React, { Component } from 'react'\nimport Layout from '../components/layout';\nimport DeviceGridColumn from '../components/deviceGridColumn';\nimport { Form, Header, Icon, Input, Item, Button, Label, Grid } from 'semantic-ui-react';\nimport { runInThisContext } from 'vm';\nimport axios from 'axios';\nimport DropZone from '../components/dropZone';\n\nexport default class editDevice extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: {},\n            files: []\n        }\n\n        this.handleFileChange = this.handleFileChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    static getInitialProps({ query: { id } }) {\n        return { id: id }\n    }\n\n    componentDidMount() {\n        console.log(this.props.id)\n        fetch(`/api/getDevice/${this.props.id}`)\n            .then(res => res.json())\n            .then(user => this.setState({ data: user.resp[0] }));\n    }\n\n    handleFileChange(file, name) {\n        var files = this.state.files;\n        var data = this.state.data;\n\n        switch (name) {\n            case 'Dieplot':\n                data.dieplotUpdateCount ? data.dieplotUpdateCount = data.dieplotUpdateCount++ : data.dieplotUpdateCount = 1;\n                data.dieplotLastUpdateDate = new Date();\n                data.dieplot = file.name;\n                break;\n            case 'Pinout':\n                data.pinoutUpdateCount ? data.pinoutUpdateCount = data.pinoutUpdateCount++ : data.pinoutUpdateCount = 1;\n                data.pinoutLastUpdateDate = new Date();\n                data.pinout = file.name;\n                break;\n            case 'Database':\n                data.databaseUpdateCount ? data.databaseUpdateCount = data.databaseUpdateCount++ : data.databaseUpdateCount = 1;\n                data.databaseLastUpdateDate = new Date();\n                data.database = file.name;\n                break;\n            case 'Assura':\n                data.assuraUpdateCount ? data.assuraUpdateCount = data.assuraUpdateCount++ : data.assuraUpdateCount = 1;\n                data.assuraLastUpdateDate = new Date();\n                data.assura = file.name;\n                break;\n            case 'Datasheet':\n                data.datasheetUpdateCount ? data.datasheetUpdateCount = data.datasheetUpdateCount++ : data.datasheetUpdateCount = 1;\n                data.datasheetLastUpdateDate = new Date();\n                data.datasheet = file.name;\n                break;\n            case 'EVM':\n                data.evmUpdateCount ? data.evmUpdateCount = data.evmUpdateCount++ : data.evmUpdateCount = 1;\n                data.evmLastUpdateDate = new Date();\n                data.evm = file.name;\n                break;\n        }\n        this.setState({\n            data: data,\n            files: [...this.state.files, file]\n        })\n    }\n\n    handleSubmit(e) {\n\n        e.preventDefault();\n        \n        var data = this.state.data;\n        console.log('data', data)\n        var url = ' http://localhost:3000/api/updateDevice';\n        axios.post(url,data)\n        .then(response=>console.log(response))\n        .catch(e=>console.log(e))\n    }\n\n    render() {\n        return (\n            <div>\n                <Layout>\n                    <Header as='h1' textAlign='center'>\n                        <Icon name='microchip' />\n                        {this.state.data.name}\n                    </Header>\n                    <Grid columns='equal' divided>\n                        <Grid.Row>\n                            <DeviceGridColumn\n                                name='Dieplot'\n                                file={this.state.data.dieplot}\n                                count={this.state.data.dieplotUpdateCount}\n                                date={this.state.data.dieplotLastUpdateDate}\n                                onChange={this.handleFileChange} />\n                            <DeviceGridColumn\n                                name='Pinout'\n                                file={this.state.data.pinout}\n                                count={this.state.data.pinoutUpdateCount}\n                                date={this.state.data.pinoutLastUpdateDate}\n                                onChange={this.handleFileChange} />\n                            <DeviceGridColumn\n                                name='Database'\n                                file={this.state.data.database}\n                                count={this.state.data.databaseUpdateCount}\n                                date={this.state.data.databaseLastUpdateDate}\n                                onChange={this.handleFileChange} />\n                        </Grid.Row>\n                        <Grid.Row>\n                            <DeviceGridColumn\n                                name='Assura'\n                                file={this.state.data.assura}\n                                count={this.state.data.assuraUpdateCount}\n                                date={this.state.data.assuraLastUpdateDate}\n                                onChange={this.handleFileChange} />\n                            <DeviceGridColumn\n                                name='Datasheet'\n                                file={this.state.data.datasheet}\n                                count={this.state.data.datasheetUpdateCount}\n                                date={this.state.data.datasheetLastUpdateDate}\n                                onChange={this.handleFileChange} />\n                            <DeviceGridColumn\n                                name='EVM'\n                                file={this.state.data.evm}\n                                count={this.state.data.evmUpdateCount}\n                                date={this.state.data.evmLastUpdateDate}\n                                onChange={this.handleFileChange}/>\n                        </Grid.Row>\n                    </Grid>\n                    <DropZone name={this.props.name}>\n                        <div>\n                            <h1>Drag A File Here...</h1>\n                        </div>\n                    </DropZone>\n                    <Button type='submit' onClick={this.handleSubmit}>Submit</Button>\n                </Layout>\n            </div>\n        )\n    }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AARA;AASA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;AAEA;AACA;AAGA;AAAA;AAAA;AAKA;;;;AAlEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAKA;AACA;AARA;AASA;AACA;;;AAKA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AA9BA;AACA;AA+BA;AACA;AACA;AAFA;AAIA;;;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;;;AAEA;AACA;AAGA;AAAA;AAAA;AACA;AAAA;AAGA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AALA;AASA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AALA;AAQA;AAAA;AAKA;AAAA;AAAA;AAIA;;;AA5HA;AAAA;AACA;AAAA;AAAA;AACA;;;;AAdA;AACA;AADA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}